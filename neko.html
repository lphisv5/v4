<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>nekos.best 3D Stack</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap');

:root {
  --primary: #ff79c6;
  --secondary: #bd93f9;
  --bg: #1e1f28;
  --text: #f8f8f2;
  --card-bg: #2c2d3a;
  --line-color: #ffb6c1;
  --success: #50fa7b;
  --error: #ff5555;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Montserrat', sans-serif;
  background: linear-gradient(145deg, #1e1f28, #252635);
  color: var(--text);
  min-height: 100vh;
  padding-bottom: 2rem;
}

header {
  background: linear-gradient(145deg, #ff79c6, #ff58a0);
  padding: 1.5rem;
  text-align: center;
  font-size: 2rem;
  font-weight: 600;
  letter-spacing: 1px;
  box-shadow: 0 4px 20px rgba(255, 121, 198, 0.3);
  position: relative;
  overflow: hidden;
  margin-bottom: 2rem;
}

header::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.15) 50%, transparent 60%);
  animation: shine 3s infinite linear;
}

@keyframes shine {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 1.5rem;
}

.search-bar {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
  margin-bottom: 2rem;
  position: relative;
  z-index: 100;
}

@media (max-width: 768px) {
  .search-bar {
    justify-content: center;
    gap: 0.8rem;
  }
  
  .dropdown,
  input[type="number"] {
    width: 100% !important;
    max-width: 300px;
  }
  
  button {
    width: 100%;
    max-width: 300px;
  }
}

@media (max-width: 480px) {
  header {
    font-size: 1.5rem;
    padding: 1rem;
  }
  
  .search-bar {
    gap: 0.5rem;
  }
}

.dropdown {
  position: relative;
  width: 280px;
  z-index: 1000;
}

.dropdown-toggle {
  padding: 0.8rem 1.2rem;
  font-size: 1rem;
  border-radius: 12px;
  border: 2px solid rgba(255, 255, 255, 0.1);
  background: rgba(42, 43, 58, 0.8);
  color: var(--text);
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  cursor: pointer;
  transition: all 0.3s ease;
  width: 100%;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
}

.dropdown-toggle:hover {
  background: rgba(52, 53, 68, 0.9);
  border-color: var(--primary);
  transform: translateY(-2px);
}

.dropdown-toggle .count {
  background: var(--primary);
  color: white;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 0.8rem;
  min-width: 24px;
  text-align: center;
}

.dropdown-toggle::after {
  content: "▼";
  font-size: 0.8rem;
  transition: transform 0.3s;
  opacity: 0.7;
}

.dropdown.open .dropdown-toggle::after {
  transform: rotate(180deg);
}

.dropdown-options {
  position: absolute;
  top: calc(100% + 5px);
  left: 0;
  width: 100%;
  max-height: 0;
  overflow: hidden;
  background: rgba(32, 33, 45, 0.98);
  backdrop-filter: blur(20px);
  border-radius: 12px;
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
  transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
  opacity: 0;
  z-index: 1001;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.dropdown.open .dropdown-options {
  max-height: 400px;
  opacity: 1;
  overflow-y: auto;
}

.dropdown-controls {
  padding: 0.8rem;
  display: flex;
  gap: 0.5rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(0, 0, 0, 0.2);
}

.dropdown-controls button {
  flex: 1;
  padding: 0.5rem;
  font-size: 0.85rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  background: rgba(255, 255, 255, 0.1);
  color: var(--text);
}

.dropdown-controls button:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-1px);
}

.dropdown-controls button:first-child {
  background: var(--secondary);
}

.dropdown-controls button:last-child {
  background: var(--error);
}

.dropdown-options label {
  position: relative;
  padding: 0.8rem 1rem;
  margin: 0.2rem 0.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  user-select: none;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.03);
  transition: all 0.2s;
}

.dropdown-options label:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateX(5px);
}

.dropdown-options input[type="checkbox"] {
  appearance: none;
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 6px;
  border: 2px solid var(--text);
  background: rgba(255, 255, 255, 0.05);
  cursor: pointer;
  position: relative;
  transition: all 0.3s ease;
  flex-shrink: 0;
}

.dropdown-options input[type="checkbox"]:checked {
  background: var(--primary);
  border-color: var(--primary);
  box-shadow: 0 0 15px rgba(255, 121, 198, 0.5);
}

.dropdown-options input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 6px;
  width: 5px;
  height: 10px;
  border-right: 2px solid white;
  border-bottom: 2px solid white;
  transform: rotate(45deg);
}

.dropdown-options label span {
  flex: 1;
  font-size: 0.95rem;
  color: var(--text);
}

input[type="number"] {
  padding: 0.8rem 1.2rem;
  font-size: 1rem;
  border-radius: 12px;
  border: 2px solid rgba(255, 255, 255, 0.1);
  background: rgba(42, 43, 58, 0.8);
  color: var(--text);
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  width: 200px;
}

input[type="number"]:hover {
  border-color: var(--primary);
  transform: translateY(-2px);
}

input[type="number"]:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(255, 121, 198, 0.3);
}

button {
  padding: 0.8rem 2.5rem;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  background: linear-gradient(145deg, #ff79c6, #ff58a0);
  color: white;
  box-shadow: 0 6px 20px rgba(255, 121, 198, 0.4);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

button:hover::before {
  left: 100%;
}

button:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(255, 121, 198, 0.6);
}

button:active {
  transform: translateY(-1px);
  box-shadow: 0 4px 15px rgba(255, 121, 198, 0.4);
}

button.loading {
  pointer-events: none;
  opacity: 0.8;
}

button.loading::after {
  content: "";
  width: 18px;
  height: 18px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: white;
  animation: spin 0.8s infinite linear;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.category-container {
  display: flex;
  flex-direction: column;
  gap: 2.5rem;
}

.category-group {
  background: rgba(42, 43, 58, 0.5);
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.05);
  animation: fadeIn 0.6s ease-out;
}

.category-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 0.8rem;
  border-bottom: 2px solid var(--primary);
}

.category-title {
  font-size: 1.4rem;
  font-weight: 600;
  color: var(--primary);
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.category-count {
  background: var(--primary);
  color: white;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 600;
}

.scroll-row {
  display: flex;
  overflow-x: auto;
  gap: 1.2rem;
  padding: 0.5rem;
  padding-bottom: 1rem;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: var(--primary) rgba(0, 0, 0, 0.2);
}

.scroll-row::-webkit-scrollbar {
  height: 8px;
}

.scroll-row::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

.scroll-row::-webkit-scrollbar-thumb {
  background: var(--primary);
  border-radius: 4px;
}

.scroll-row::-webkit-scrollbar-thumb:hover {
  background: #ff58a0;
}

.card {
  flex: 0 0 auto;
  width: 220px;
  border-radius: 16px;
  overflow: hidden;
  background: var(--card-bg);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  scroll-snap-align: start;
  position: relative;
}

.card:hover {
  transform: translateY(-8px) scale(1.03);
  box-shadow: 0 20px 40px rgba(255, 121, 198, 0.3);
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(to bottom, transparent 60%, rgba(0, 0, 0, 0.8));
  z-index: 1;
  opacity: 0;
  transition: opacity 0.3s;
}

.card:hover::before {
  opacity: 1;
}

.card img {
  width: 100%;
  height: 250px;
  object-fit: cover;
  display: block;
  transition: transform 0.6s ease;
}

.card:hover img {
  transform: scale(1.1);
}

.card-info {
  padding: 1rem;
  position: relative;
  z-index: 2;
  background: rgba(44, 45, 58, 0.9);
}

.card-info h3 {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.alert {
  position: fixed;
  top: 30px;
  left: 50%;
  transform: translateX(-50%) translateY(-100px);
  padding: 1rem 2rem;
  border-radius: 12px;
  font-weight: 600;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
  z-index: 2000;
  opacity: 0;
  transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  max-width: 90%;
  text-align: center;
}

.alert.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

.alert.success {
  background: linear-gradient(145deg, rgba(80, 250, 123, 0.9), rgba(56, 220, 95, 0.9));
  color: #1a1a1a;
}

.alert.error {
  background: linear-gradient(145deg, rgba(255, 85, 85, 0.9), rgba(220, 56, 56, 0.9));
  color: white;
}

.alert.info {
  background: linear-gradient(145deg, rgba(189, 147, 249, 0.9), rgba(157, 105, 249, 0.9));
  color: white;
}

.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(30, 31, 40, 0.95);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 3000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.loading-overlay.show {
  opacity: 1;
  pointer-events: all;
}

.loading-spinner {
  width: 60px;
  height: 60px;
  border: 5px solid rgba(255, 121, 198, 0.3);
  border-radius: 50%;
  border-top-color: var(--primary);
  animation: spin 1s infinite linear;
}

.no-results {
  text-align: center;
  padding: 3rem 2rem;
  color: rgba(255, 255, 255, 0.5);
  font-size: 1.1rem;
}

.no-results i {
  font-size: 3rem;
  margin-bottom: 1rem;
  opacity: 0.3;
}

footer {
  text-align: center;
  margin-top: 3rem;
  padding: 2rem;
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.9rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.pulse {
  animation: pulse 2s infinite;
}

.tooltip {
  position: relative;
}

.tooltip:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  font-size: 0.85rem;
  white-space: nowrap;
  z-index: 1000;
  margin-bottom: 5px;
}
</style>
</head>
<body>

<header>
  <div class="container">
    nekos.best 3D Stack
  </div>
</header>

<div class="container">
  <div class="search-bar">
    <div class="dropdown" id="categoryDropdown">
      <div class="dropdown-toggle" onclick="toggleDropdown()">
        <span>Select Categories</span>
        <span class="count">0</span>
      </div>
      <div class="dropdown-options" id="dropdownOptions">
        <div class="dropdown-controls">
          <button onclick="selectAll(true)" data-tooltip="Select all categories">All</button>
          <button onclick="selectAll(false)" data-tooltip="Clear selection">None</button>
        </div>
      </div>
    </div>
    
    <input type="number" id="amount" 
           placeholder="Images per category (1-20)" 
           min="1" max="20" value="5"
           data-tooltip="Number of images to fetch per category">
    
    <button id="loadButton" onclick="fetchImages()">
      <span>Load Images</span>
    </button>
  </div>
  
  <div id="categoryContainer" class="category-container"></div>
</div>

<div id="alert" class="alert"></div>

<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-spinner"></div>
</div>

<footer>
  <div class="container">
    <p>Powered by <a href="https://nekos.best" target="_blank" style="color: var(--primary); text-decoration: none;">nekos.best API</a> • Images load on-demand</p>
    <p style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.7;">
      Click on any image to view full size • Use horizontal scroll to browse categories
    </p>
  </div>
</footer>

<script>
let selectedCategories = new Set();
let allCategories = [];
let isLoading = false;
const elements = {
  dropdown: null,
  dropdownToggle: null,
  dropdownOptions: null,
  categoryContainer: null,
  alert: null,
  amountInput: null,
  loadButton: null,
  loadingOverlay: null
};

function init() {
  elements.dropdown = document.getElementById('categoryDropdown');
  elements.dropdownOptions = document.getElementById('dropdownOptions');
  elements.categoryContainer = document.getElementById('categoryContainer');
  elements.alert = document.getElementById('alert');
  elements.amountInput = document.getElementById('amount');
  elements.loadButton = document.getElementById('loadButton');
  elements.loadingOverlay = document.getElementById('loadingOverlay');
  
  setupEventListeners();
  
  loadCategories();
  
  setTimeout(() => {
    showAlert('Welcome! Select categories and click "Load Images" to start', 'info');
  }, 1000);
}

function setupEventListeners() {
  document.addEventListener('click', (e) => {
    if (elements.dropdown && !elements.dropdown.contains(e.target)) {
      elements.dropdown.classList.remove('open');
    }
  });
  
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && elements.dropdown?.classList.contains('open')) {
      elements.dropdown.classList.remove('open');
    }
    if (e.key === 'Enter' && !elements.dropdown?.classList.contains('open')) {
      fetchImages();
    }
  });
  
  if (elements.amountInput) {
    elements.amountInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        fetchImages();
      }
    });
  }
}

async function loadCategories() {
  showLoading(true);
  
  try {
    const response = await fetch('https://nekos.best/api/v2/endpoints');
    if (!response.ok) throw new Error('Failed to fetch categories');
    
    const data = await response.json();
    allCategories = Object.keys(data);
    
    populateCategoryDropdown();
    
  } catch (error) {
    console.error('Error loading categories:', error);
    showAlert('Failed to load categories. Please refresh the page.', 'error');
  } finally {
    showLoading(false);
  }
}

function populateCategoryDropdown() {
  if (!elements.dropdownOptions) return;
  
  const controls = elements.dropdownOptions.querySelector('.dropdown-controls');
  elements.dropdownOptions.innerHTML = '';
  if (controls) {
    elements.dropdownOptions.appendChild(controls);
  }
  
  allCategories.forEach(category => {
    const label = document.createElement('label');
    
    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.value = category;
    checkbox.checked = selectedCategories.has(category);
    checkbox.addEventListener('change', (e) => {
      e.stopPropagation();
      toggleCategory(category, checkbox.checked);
    });
    
    const span = document.createElement('span');
    span.textContent = formatCategoryName(category);
    
    label.appendChild(checkbox);
    label.appendChild(span);
    elements.dropdownOptions.appendChild(label);
  });
  
  updateDropdownText();
}

function formatCategoryName(category) {
  return category
    .split('_')
    .map(word => word.charAt(0).toUpperCase() + word.slice(1))
    .join(' ');
}

function toggleCategory(category, isSelected) {
  if (isSelected) {
    selectedCategories.add(category);
  } else {
    selectedCategories.delete(category);
  }
  updateDropdownText();
}

function selectAll(select) {
  if (select) {
    allCategories.forEach(cat => selectedCategories.add(cat));
  } else {
    selectedCategories.clear();
  }
  
  const checkboxes = elements.dropdownOptions?.querySelectorAll('input[type="checkbox"]');
  checkboxes?.forEach(checkbox => {
    checkbox.checked = select;
  });
  
  updateDropdownText();
}

function updateDropdownText() {
  const toggleSpan = elements.dropdown?.querySelector('.dropdown-toggle span:first-child');
  const countSpan = elements.dropdown?.querySelector('.count');
  
  if (!toggleSpan || !countSpan) return;
  
  const count = selectedCategories.size;
  countSpan.textContent = count;
  
  if (count === 0) {
    toggleSpan.textContent = 'Select Categories';
  } else if (count === 1) {
    const [first] = selectedCategories;
    toggleSpan.textContent = formatCategoryName(first);
  } else if (count === allCategories.length) {
    toggleSpan.textContent = 'All Categories';
  } else {
    toggleSpan.textContent = `${count} Categories Selected`;
  }
}

function toggleDropdown() {
  if (elements.dropdown) {
    elements.dropdown.classList.toggle('open');
  }
}

async function fetchImages() {
  if (selectedCategories.size === 0) {
    showAlert('Please select at least one category', 'error');
    return;
  }
  
  const amount = parseInt(elements.amountInput?.value || '5');
  if (isNaN(amount) || amount < 1 || amount > 20) {
    showAlert('Please enter a number between 1 and 20', 'error');
    return;
  }
  
  if (isLoading) return;
  isLoading = true;
  
  if (elements.loadButton) {
    elements.loadButton.classList.add('loading');
    elements.loadButton.disabled = true;
  }
  
  showLoading(true);
  
  if (elements.categoryContainer) {
    elements.categoryContainer.innerHTML = '';
  }
  
  try {
    const fetchPromises = Array.from(selectedCategories).map(async (category) => {
      try {
        const response = await fetch(`https://nekos.best/api/v2/${category}?amount=${amount}`);
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        
        const data = await response.json();
        return {
          category,
          success: true,
          data: data.results || []
        };
      } catch (error) {
        console.error(`Error fetching ${category}:`, error);
        return {
          category,
          success: false,
          error: error.message
        };
      }
    });
    
    const results = await Promise.all(fetchPromises);
    
    results.forEach(result => {
      if (result.success) {
        displayCategory(result.category, result.data);
      } else {
        displayErrorCategory(result.category, result.error);
      }
    });

    const successCount = results.filter(r => r.success).length;
    if (successCount > 0) {
      showAlert(`Successfully loaded ${successCount} category${successCount > 1 ? 's' : ''}`, 'success');
    }
    
  } catch (error) {
    console.error('Error fetching images:', error);
    showAlert('Failed to load images. Please try again.', 'error');
  } finally {
    isLoading = false;
    
    if (elements.loadButton) {
      elements.loadButton.classList.remove('loading');
      elements.loadButton.disabled = false;
    }
    
    showLoading(false);
  }
}

function displayCategory(category, items) {
  if (!elements.categoryContainer || !items?.length) return;
  
  const group = document.createElement('div');
  group.className = 'category-group';
  
  const header = document.createElement('div');
  header.className = 'category-header';
  
  const title = document.createElement('div');
  title.className = 'category-title';
  title.innerHTML = `
    <span>${formatCategoryName(category)}</span>
    <span class="category-count">${items.length}</span>
  `;
  
  header.appendChild(title);
  group.appendChild(header);
  
  const scrollRow = document.createElement('div');
  scrollRow.className = 'scroll-row';
  
  items.forEach(item => {
    const card = createCard(item, category);
    scrollRow.appendChild(card);
  });
  
  group.appendChild(scrollRow);
  elements.categoryContainer.appendChild(group);
}

function displayErrorCategory(category, error) {
  if (!elements.categoryContainer) return;
  
  const group = document.createElement('div');
  group.className = 'category-group';
  group.style.opacity = '0.6';
  
  const header = document.createElement('div');
  header.className = 'category-header';
  
  const title = document.createElement('div');
  title.className = 'category-title';
  title.innerHTML = `
    <span style="color: var(--error)">${formatCategoryName(category)}</span>
    <span class="category-count" style="background: var(--error)">Error</span>
  `;
  
  header.appendChild(title);
  group.appendChild(header);
  
  const errorDiv = document.createElement('div');
  errorDiv.className = 'no-results';
  errorDiv.innerHTML = `
    <div style="font-size: 2rem; margin-bottom: 1rem;">⚠️</div>
    <p>Failed to load images</p>
    <p style="font-size: 0.8rem; opacity: 0.7; margin-top: 0.5rem;">${error}</p>
  `;
  
  group.appendChild(errorDiv);
  elements.categoryContainer.appendChild(group);
}

function createCard(item, category) {
  const card = document.createElement('div');
  card.className = 'card';
  card.title = `Click to view ${item.anime_name || category} in full size`;
  
  const img = document.createElement('img');
  img.src = item.url;
  img.alt = item.anime_name || formatCategoryName(category);
  img.loading = 'lazy';
  
  img.onerror = function() {
    this.src = `data:image/svg+xml,${encodeURIComponent(`
      <svg width="220" height="250" xmlns="http://www.w3.org/2000/svg">
        <rect width="100%" height="100%" fill="#2c2d3a"/>
        <text x="50%" y="50%" text-anchor="middle" fill="#f8f8f2" font-family="Arial" font-size="14" dy="0.3em">
          Image not available
        </text>
      </svg>
    `)}`;
  };
  
  const info = document.createElement('div');
  info.className = 'card-info';
  
  const title = document.createElement('h3');
  title.textContent = item.anime_name || formatCategoryName(category);
  
  info.appendChild(title);
  card.appendChild(img);
  card.appendChild(info);
  
  card.addEventListener('click', () => {
    window.open(item.url, '_blank');
  });
  
  return card;
}

function showAlert(message, type = 'info') {
  if (!elements.alert) return;
  
  elements.alert.textContent = message;
  elements.alert.className = `alert ${type}`;
  elements.alert.classList.add('show');
  
  setTimeout(() => {
    if (elements.alert) {
      elements.alert.classList.remove('show');
    }
  }, 5000);
}

function showLoading(show) {
  if (elements.loadingOverlay) {
    if (show) {
      elements.loadingOverlay.classList.add('show');
    } else {
      elements.loadingOverlay.classList.remove('show');
    }
  }
}

document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
